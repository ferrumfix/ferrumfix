# Core Architecture

## Workspace Map

- `crates/fefix`: main library used by most clients.
- `crates/fefix-dictionary`: parses and serves FIX dictionary metadata.
- `crates/fefix-codegen`: emits Rust definitions from dictionaries.
- `tests/*`: integration/regression checks.

## Dependency Flow

1. `fefix-dictionary` loads FIX specs and exposes typed dictionary access.
2. `fefix-codegen` consumes `Dictionary` to generate constants/types.
3. `fefix` uses dictionary data at runtime and generated definitions at compile time.

## High-Signal Files

- API surface:
  - `crates/fefix/src/lib.rs`
- Tag-value codec stack:
  - `crates/fefix/src/tagvalue/mod.rs`
  - `crates/fefix/src/tagvalue/raw_decoder.rs`
  - `crates/fefix/src/tagvalue/decoder.rs`
  - `crates/fefix/src/tagvalue/encoder.rs`
- Session layer:
  - `crates/fefix/src/session/mod.rs`
  - `crates/fefix/src/session/event_loop.rs`
  - `crates/fefix/src/session/config.rs`
  - `crates/fefix/src/session/seq_numbers.rs`
- Dictionary import path:
  - `crates/fefix-dictionary/src/lib.rs`
  - `crates/fefix-dictionary/src/quickfix.rs`
  - `crates/fefix-dictionary/src/builder.rs`
- Codegen and generated definitions:
  - `crates/fefix-codegen/src/lib.rs`
  - `crates/fefix/build.rs`
  - `crates/fefix/src/definitions.rs`

## Editing Boundaries

- Prefer editing source logic over generated output.
- Never hand-edit files included from `OUT_DIR` (generated by `build.rs`).
- Keep layer separation clear:
  - Transport/session concerns in `session/*`.
  - Field-level parsing/serialization in `tagvalue/*`.
  - FIX metadata semantics in `fefix-dictionary`.
